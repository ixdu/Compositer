<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
        <title>Test rotate (with animation)</title>
        <script type="text/javascript" src="Compositer.js"></script>
        <script type="text/javascript">
            /*
              shared objects for client and server implementations of dsa
              Copyright (C) 2011  Alexey Bagin aka freeze (email freeze@2du.ru)

              This program is free software: you can redistribute it and/or modify
              it under the terms of the GNU Affero General Public License as
              published by the Free Software Foundation, either version 3 of the
              License, or (at your option) any later version.

              This program is distributed in the hope that it will be useful,
              but WITHOUT ANY WARRANTY; without even the implied warranty of
              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
              GNU Affero General Public License for more details.

              You should have received a copy of the GNU Affero General Public License
              along with this program.  If not, see <http://www.gnu.org/licenses/>.'

              version 1.0
            */

            function start () {
                var comp = new Compositer();

                var root = 0;

                var image = comp.image_create({
                    width : '20%',
                    height : '20%',

                    x : '40%',
                    y : '40%',

                    rotate : '45deg',

                    source : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY2D4zwAAAgIBANHTRkQAAAAASUVORK5CYII='
                });

                var anim = comp.anim_create([
                    {
                        duration : 1000,

                        actions : {
                            rotate : 315
                        }
                    },
                    {
                        duration : 2000,

                        actions : {
                            rotate : -360
                        }
                    },
                    {
                        duration : 1000,

                        actions : {
                            rotate : 45
                        }
                    }
                ]);

                var bind = comp.anim_bind(image, anim);

                comp.frame_add(root, image);

                comp.anim_start(bind);

                return undefined;
            }
        </script>
    </head>
    <body onload="start()"></body>
</html>
